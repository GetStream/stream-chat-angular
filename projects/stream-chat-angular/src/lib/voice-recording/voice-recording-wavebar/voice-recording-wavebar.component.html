<!--eslint-disable @angular-eslint/template/click-events-have-key-events-->
<div
  #container
  class="str-chat__wave-progress-bar__track"
  data-testid="wave-progress-bar-track"
  role="progressbar"
  (mousedown)="isDragging = true"
  (mouseup)="isDragging = false"
  (mouseleave)="isDragging = false"
  (mousemove)="isDragging ? seek($event) : null"
  (click)="seek($event)"
>
  <!--eslint-enable @angular-eslint/template/click-events-have-key-events-->
  @for (dataPoint of resampledWaveFormData; track dataPoint; let i = $index) {
    <div
      class="str-chat__wave-progress-bar__amplitude-bar"
      [class.str-chat__wave-progress-bar__amplitude-bar--active]="
        progress > i / resampledWaveFormData.length
      "
      [style.--str-chat__wave-progress-bar__amplitude-bar-height]="
        dataPoint ? dataPoint * 100 + '%' : '0%'
      "
    ></div>
  }
  <div
    class="str-chat__wave-progress-bar__progress-indicator"
    data-testid="wave-progress-bar-progress-indicator"
    [ngStyle]="{ 'inset-inline-start': progress * 100 + '%' }"
  ></div>
</div>

@if (message?.text) {
  <p
    [class.str-chat__quoted-message-text-value]="isQuoted"
    [class.str-chat__message-text-value]="!isQuoted"
    data-testid="text"
  >
    @if (messageTextParts) {
      @for (part of messageTextParts; track part.content) {
        @if (part.type === "text") {
          <span [innerHTML]="part.content"></span>
        } @else {
          <ng-template #defaultMention let-content="content">
            <span class="str-chat__message-mention">{{ content }}</span>
          </ng-template>
          <ng-container
            *ngTemplateOutlet="
              (customTemplatesService.mentionTemplate$ | async) ||
                defaultMention;
              context: getMentionContext(part)
            "
          />
        }
      }
    } @else {
      @if (displayAs === "text") {
        {{ messageText || "" }}
      } @else {
        <span data-testid="html-content" [innerHTML]="messageText"></span>
      }
    }
  </p>
}

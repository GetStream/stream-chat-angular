@if (voiceRecorderService?.isRecorderVisible$ | async) {
  <div class="str-chat__audio_recorder-container">
    <div class="str-chat__audio_recorder" data-testid="audio-recorder">
      <button
        class="str-chat__audio_recorder__cancel-button"
        data-testid="cancel-recording-audio-button"
        [disabled]="isLoading"
        (click)="cancel()"
        (keyup.enter)="cancel()"
      >
        <stream-icon-placeholder icon="bin" />
      </button>
      @if (
        (recordState === MediaRecordingState.RECORDING ||
          recordState === MediaRecordingState.PAUSED) &&
        !recording
      ) {
        <stream-voice-recorder-wavebar />
      }
      <!-- eslint-disable @angular-eslint/template/no-any -->
      @if (!!recording) {
        <stream-voice-recording [attachment]="$any(recording)" />
      }
      <!-- eslint-enable @angular-eslint/template/no-any -->
      @if (recordState === MediaRecordingState.PAUSED && !recording) {
        <button
          class="str-chat__audio_recorder__resume-recording-button"
          (click)="resume()"
          (keyup.enter)="resume()"
        >
          <stream-icon-placeholder icon="mic" />
        </button>
      }
      @if (recordState === MediaRecordingState.RECORDING && !recording) {
        <button
          class="str-chat__audio_recorder__pause-recording-button"
          data-testid="pause-recording-audio-button"
          (click)="pause()"
          (keyup.enter)="pause()"
        >
          <stream-icon-placeholder icon="pause" />
        </button>
      }
      @if (recordState === MediaRecordingState.STOPPED) {
        <button
          class="str-chat__audio_recorder__complete-button"
          data-testid="audio-recorder-complete-button"
          [disabled]="!recording"
          (click)="uploadRecording()"
          (keyup.enter)="uploadRecording()"
        >
          @if (isLoading) {
            <stream-loading-indicator />
          } @else {
            <stream-icon-placeholder icon="send" />
          }
        </button>
      } @else {
        <button
          class="str-chat__audio_recorder__stop-button"
          data-testid="audio-recorder-stop-button"
          (click)="stop()"
          (keyup.enter)="stop()"
        >
          <stream-icon-placeholder icon="delivered" />
        </button>
      }
    </div>
  </div>
}

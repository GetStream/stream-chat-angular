---
id: upgrade-v4
title: Upgrade from v4
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

## Highlights

stream-chat-angular@5 brings improvements in the following categories:

- New message menu and message edit UIs to improve usability
- Provide more CSS customization options for the avatar and icon components (to avoid providing a custom component for even basic customization)
- Dropping support for [Angular 12-14](https://getstream.io/chat/docs/sdk/angular/basics/angular-version-support/) and [theme-v1](https://getstream.io/chat/docs/sdk/angular/concepts/themeing/)

The full list of [features and progress](https://github.com/GetStream/stream-chat-angular/issues/584) are on GitHub.

## Get started

<Tabs groupId="examples">
<TabItem value="Angular17" label="Angular 17">

```
npm install stream-chat-angular@beta
```

</TabItem>
<TabItem value="Angular16" label="Angular 16">

```
npm install stream-chat-angular@beta ngx-float-ui@16
```

</TabItem>
<TabItem value="Angular15" label="Angular 15">

```
npm install stream-chat-angular@beta ngx-float-ui@15 @ngx-translate/core@14
```

</TabItem>
</Tabs>

## Breaking changes

### Angular version support

Angular versions 12-14 are no longer supported. You can use the [Angular update guide](https://update.angular.io/) to update your application.

### Theme v1 is removed

Theme-v1 was deprecated in version 4. Most customers already use theme-v2 which used to be imported from this path:

```scss
@import "stream-chat-angular/src/assets/styles/v2/scss/index.scss";
```

From version 5 this path should be used:

```scss
@import "stream-chat-angular/src/assets/styles/scss/index.scss";

// or if you're using CSS
@import "stream-chat-angular/src/assets/styles/css/index.css";
```

No futher action is required for customers who were already using theme-v2.

Customers who used to use theme-v1 now need to use theme-v2. Updating from theme-v1 to theme-v2 will require to rewrite your custom CSS code as the new theme has a new variable system, and all the components were restructured. To help you get started please refer our [theming guide](../theming/introduction.mdx).

### Removed deprecated features

#### `MessageListComponent`

- No longer accepts the `customMessageActions` input. You can use the [`MessageActionsService`](../../services/MessageActionsService/#customactions) for configuring custom message actions.

[Go to documentation](../../components/MessageListComponent)

#### `MessageComponent`

- No longer accepts the `customActions` input. You can use the [`MessageActionsService`](../../services/MessageActionsService/#customactions) for configuring custom message actions.

[Go to documentation](../../components/MessageComponent)

#### `MessageActionsBoxComponent`

- No longer accepts the `isOpen` input. The `Message` component will take care of hiding/showing the action box component.
- The `customActions` input has been removed. You can use the [`MessageActionsService`](../../services/MessageActionsService/#customactions) for configuring custom message actions.
- The `displayedActionsCount` output has been removed. Moving forward the [`MessageActionsService`](../../services/MessageActionsService/#customactions) will be able to provide this information.
- The `isEditing` output has been removed. Moving forward the [`MessageActionsService`](../../services/MessageActionsService/#customactions) will be able to provide this information.

[Go to documentation](../../components/MessageActionsBoxComponent)

#### `messageActionsBoxTemplate$`

- No longer accepts the `isOpen` input. The `Message` component will take care of hiding/showing the action box component.
- The `customActions` input has been removed. You can use the [`MessageActionsService`](../../services/MessageActionsService/#customactions) for configuring custom message actions.
- The `displayedActionsCountChangeHandler` input has been removed. Moving forward the [`MessageActionsService`](../../services/MessageActionsService/#customactions) will be able to provide this information.

[Go to documentation](../../services/CustomTemplatesService/#messageactionsboxtemplate)

#### `ImageLoadService`

The `ImageLoadService` is now removed. It's no longer required since the SDK uses a more [advanced image sizing method](../../components/AttachmentListComponent/#image-and-video-sizing).

#### `ChannelListToggleService`

The `ChannelListToggleService` is now removed as it was only used in theme-v1. For theme-v2 please refer to the [responsive layout guide](../code-examples/responsive-layout.mdx).

### Channel query error handling

In previous versions if an error occured during channel load, the `channelService.channels$` Observable emitted an error, which would close the stream. Users would have to reload the page to be able to reinitialize the `ChannelService`. This isn't a sensible default behavior. From version 5 the `channels$` Observable will never emit an error, the channel query result can be observed using the [`channelService.channelQueryState$`](../../services/ChannelService/#channelquerystate). With this change the `options.keepAliveChannels$OnError` is no longer necessary, and has been removed.

### Type changes

- Event handlers with `Function` type are changed to `() => void`
- Event handlers with `any` return types are changed to `void` return type

### Default reactions

To better align with other SDKs, the default reaction has been changed: the `angry` reaction is removed. You can provide your own reaction set using the [`MessageReactionsService`](../../services/MessageReactionsService/#reactions)

## Other changes

### Unused packages

The `ngx-popperjs` package has been deprecated, so you can remove the related packages from your `package.json` file:

- `@popperjs/core`
- `ngx-popperjs`
